<!DOCTYPE html>
<html>
<head>
  <title>Simple GLB Test</title>
  <style>body { margin: 0; }</style>
</head>
<body>
  <div id="status" style="position:absolute;top:10px;left:10px;color:white;background:rgba(0,0,0,0.5);padding:10px;">
    Loading...
  </div>
  
  <script type="module">
    import * as THREE from 'https://cdn.skypack.dev/three@0.132.0';
    import { OrbitControls } from 'https://cdn.skypack.dev/three@0.132.0/examples/jsm/controls/OrbitControls.js';
    import { GLTFLoader } from 'https://cdn.skypack.dev/three@0.132.0/examples/jsm/loaders/GLTFLoader.js';
    
    const status = document.getElementById('status');
    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);
    
    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x505050); // Lighter background
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 5;
    
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.update();
    
    // Much brighter lighting
    const ambientLight = new THREE.AmbientLight(0xffffff, 1.5); // Very bright ambient
    scene.add(ambientLight);
    
    const directionalLight = new THREE.DirectionalLight(0xffffff, 1.0);
    directionalLight.position.set(5, 10, 5);
    scene.add(directionalLight);
    
    const directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.7);
    directionalLight2.position.set(-5, 8, -3);
    scene.add(directionalLight2);
    
    const paths = [
      '../assets/3d/Capitol_1st_floor_layout_.glb',
      './assets/3d/Capitol_1st_floor_layout_.glb',
      '/FinalDev/assets/3d/Capitol_1st_floor_layout_.glb',
      '../assets/3d/Capitol_1st_floor_layout.glb',
      '../SVG/Capitol_1st_floor_layout.glb'
    ];
    
    let currentPathIndex = 0;
    tryLoadModel();
    
    function tryLoadModel() {
      if (currentPathIndex >= paths.length) {
        status.textContent = 'Failed to load model from all paths';
        status.style.color = 'red';
        return;
      }
      
      const path = paths[currentPathIndex];
      status.textContent = `Loading from: ${path}`;
      
      const loader = new GLTFLoader();
      loader.load(
        path,
        (gltf) => {
          status.textContent = `Successfully loaded from: ${path}`;
          status.style.color = 'lightgreen';
          scene.add(gltf.scene);
          
          // Center and resize
          const box = new THREE.Box3().setFromObject(gltf.scene);
          const center = box.getCenter(new THREE.Vector3());
          gltf.scene.position.x = -center.x;
          gltf.scene.position.y = -center.y;
          gltf.scene.position.z = -center.z;
        },
        (xhr) => {
          const percent = Math.round((xhr.loaded / xhr.total) * 100);
          status.textContent = `Loading ${path}: ${percent}%`;
        },
        (error) => {
          console.error(`Error loading ${path}:`, error);
          currentPathIndex++;
          tryLoadModel();
        }
      );
    }
    
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
    
    function animate() {
      requestAnimationFrame(animate);
      controls.update();
      renderer.render(scene, camera);
    }
    animate();
  </script>
</body>
</html>
